<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript.Info阅读笔记 | 狼子笔记</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="王龙楷个人博客,王龙楷,狼子笔记,个人博客,前端笔记,面试技巧,Vue,javascript,DBCss,html5">
    <meta name="keywords" content="王龙楷个人博客,王龙楷,狼子笔记,个人博客,前端笔记,前端,vue,博客,javascript,html,DBCss">
    <link rel="preload" href="/assets/css/0.styles.94456445.css" as="style"><link rel="preload" href="/assets/js/app.b0a4ce1e.js" as="script"><link rel="preload" href="/assets/js/2.0d9e74f2.js" as="script"><link rel="preload" href="/assets/js/16.aae0e7a7.js" as="script"><link rel="preload" href="/assets/js/9.6b44206c.js" as="script"><link rel="prefetch" href="/assets/js/10.ff7ce18d.js"><link rel="prefetch" href="/assets/js/11.948e8e29.js"><link rel="prefetch" href="/assets/js/12.def5c1a1.js"><link rel="prefetch" href="/assets/js/13.1def5a3a.js"><link rel="prefetch" href="/assets/js/14.bcfae107.js"><link rel="prefetch" href="/assets/js/15.baf978d6.js"><link rel="prefetch" href="/assets/js/17.0555969d.js"><link rel="prefetch" href="/assets/js/18.b9cb595a.js"><link rel="prefetch" href="/assets/js/19.5534f88c.js"><link rel="prefetch" href="/assets/js/20.e3fb5433.js"><link rel="prefetch" href="/assets/js/21.cdff5d3a.js"><link rel="prefetch" href="/assets/js/22.a7bd62cc.js"><link rel="prefetch" href="/assets/js/23.cc97258a.js"><link rel="prefetch" href="/assets/js/24.2545a609.js"><link rel="prefetch" href="/assets/js/25.c32b7599.js"><link rel="prefetch" href="/assets/js/26.25fd77af.js"><link rel="prefetch" href="/assets/js/27.44a68c1c.js"><link rel="prefetch" href="/assets/js/28.e1a5cad8.js"><link rel="prefetch" href="/assets/js/29.39b6a420.js"><link rel="prefetch" href="/assets/js/3.7e0cdc3a.js"><link rel="prefetch" href="/assets/js/30.39981caa.js"><link rel="prefetch" href="/assets/js/31.5742fa7d.js"><link rel="prefetch" href="/assets/js/32.ca42cb7a.js"><link rel="prefetch" href="/assets/js/33.199431a4.js"><link rel="prefetch" href="/assets/js/34.a591a532.js"><link rel="prefetch" href="/assets/js/35.e3952643.js"><link rel="prefetch" href="/assets/js/36.0a714fba.js"><link rel="prefetch" href="/assets/js/37.648d72f0.js"><link rel="prefetch" href="/assets/js/38.7f23fd79.js"><link rel="prefetch" href="/assets/js/39.98f5465a.js"><link rel="prefetch" href="/assets/js/4.1468463a.js"><link rel="prefetch" href="/assets/js/40.be23572b.js"><link rel="prefetch" href="/assets/js/41.3da1d18b.js"><link rel="prefetch" href="/assets/js/42.d8afa607.js"><link rel="prefetch" href="/assets/js/43.b0aaffd8.js"><link rel="prefetch" href="/assets/js/44.c029a609.js"><link rel="prefetch" href="/assets/js/45.f4da0150.js"><link rel="prefetch" href="/assets/js/46.228cddbb.js"><link rel="prefetch" href="/assets/js/47.6af307d9.js"><link rel="prefetch" href="/assets/js/48.2b321227.js"><link rel="prefetch" href="/assets/js/49.55895075.js"><link rel="prefetch" href="/assets/js/5.ea987f19.js"><link rel="prefetch" href="/assets/js/50.1707383d.js"><link rel="prefetch" href="/assets/js/51.8310a68d.js"><link rel="prefetch" href="/assets/js/52.9e1ea699.js"><link rel="prefetch" href="/assets/js/53.d7661776.js"><link rel="prefetch" href="/assets/js/54.b623c6b4.js"><link rel="prefetch" href="/assets/js/55.eeb952b6.js"><link rel="prefetch" href="/assets/js/56.eb16a33b.js"><link rel="prefetch" href="/assets/js/57.bb8e6578.js"><link rel="prefetch" href="/assets/js/58.65f2b206.js"><link rel="prefetch" href="/assets/js/59.e576e1da.js"><link rel="prefetch" href="/assets/js/6.7e1a4a81.js"><link rel="prefetch" href="/assets/js/60.e62c7321.js"><link rel="prefetch" href="/assets/js/61.1d0c171c.js"><link rel="prefetch" href="/assets/js/62.c8dc5d79.js"><link rel="prefetch" href="/assets/js/63.6d0c4e3a.js"><link rel="prefetch" href="/assets/js/64.6e5af581.js"><link rel="prefetch" href="/assets/js/65.0d3d79af.js"><link rel="prefetch" href="/assets/js/66.f8f1fc7d.js"><link rel="prefetch" href="/assets/js/67.bdd2a54c.js"><link rel="prefetch" href="/assets/js/68.df1441b2.js"><link rel="prefetch" href="/assets/js/69.86710c60.js"><link rel="prefetch" href="/assets/js/7.f4b0b20b.js"><link rel="prefetch" href="/assets/js/70.ef6a0884.js"><link rel="prefetch" href="/assets/js/71.ecdc368f.js"><link rel="prefetch" href="/assets/js/72.eed3a9b1.js"><link rel="prefetch" href="/assets/js/73.30d49b4c.js"><link rel="prefetch" href="/assets/js/74.5ab72978.js"><link rel="prefetch" href="/assets/js/75.b857e76b.js"><link rel="prefetch" href="/assets/js/76.a218f8bf.js"><link rel="prefetch" href="/assets/js/77.417879ee.js"><link rel="prefetch" href="/assets/js/78.0aa3edc4.js"><link rel="prefetch" href="/assets/js/79.33bd17f8.js"><link rel="prefetch" href="/assets/js/8.e0e09ba6.js"><link rel="prefetch" href="/assets/js/80.b8f35565.js"><link rel="prefetch" href="/assets/js/81.1bc4c1b8.js"><link rel="prefetch" href="/assets/js/82.a358d48c.js"><link rel="prefetch" href="/assets/js/83.11276d94.js"><link rel="prefetch" href="/assets/js/84.f370cf1a.js"><link rel="prefetch" href="/assets/js/85.72db3bd2.js"><link rel="prefetch" href="/assets/js/86.b54bbabd.js"><link rel="prefetch" href="/assets/js/87.0a75670e.js"><link rel="prefetch" href="/assets/js/88.59379263.js">
    <link rel="stylesheet" href="/assets/css/0.styles.94456445.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">狼子笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/vue_basic/" class="nav-link">
  vue核心库
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vuex.html" class="nav-link">
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue_router.html" class="nav-link">
  vue-router
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue_mockjs.html" class="nav-link">
  vue-mockjs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/react/setState.html" class="nav-link">
  this.setState
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/Lazy&amp;Suspense.html" class="nav-link">
  React.lazy&amp;React.Suspense
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/Context.html" class="nav-link">
  Context
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/redux_core.html" class="nav-link">
  redux概念理解
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/react-redux.html" class="nav-link">
  react-redux基本使用
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/mobx-basic.html" class="nav-link">
  mobx基本使用
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/virtualList.html" class="nav-link">
  简单实现VirtualList
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/redux-toolkit.html" class="nav-link">
  redux-toolkit常规使用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ECMAScript/ES3_5/" class="nav-link">
  JS3_5
</a></li><li class="dropdown-item"><!----> <a href="/blog/ECMAScript/ES_Next/" class="nav-link">
  ES_Next
</a></li></ul></div></div><div class="nav-item"><a href="/blog/DBCss/" class="nav-link">
  DOM+CSS
</a></div><div class="nav-item"><a href="/blog/other/" class="nav-link router-link-active">
  Others
</a></div><div class="nav-item"><a href="/blog/daily/" class="nav-link">
  随笔
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/vue_basic/" class="nav-link">
  vue核心库
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vuex.html" class="nav-link">
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue_router.html" class="nav-link">
  vue-router
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue_mockjs.html" class="nav-link">
  vue-mockjs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/react/setState.html" class="nav-link">
  this.setState
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/Lazy&amp;Suspense.html" class="nav-link">
  React.lazy&amp;React.Suspense
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/Context.html" class="nav-link">
  Context
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/redux_core.html" class="nav-link">
  redux概念理解
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/react-redux.html" class="nav-link">
  react-redux基本使用
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/mobx-basic.html" class="nav-link">
  mobx基本使用
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/virtualList.html" class="nav-link">
  简单实现VirtualList
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/redux-toolkit.html" class="nav-link">
  redux-toolkit常规使用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ECMAScript/ES3_5/" class="nav-link">
  JS3_5
</a></li><li class="dropdown-item"><!----> <a href="/blog/ECMAScript/ES_Next/" class="nav-link">
  ES_Next
</a></li></ul></div></div><div class="nav-item"><a href="/blog/DBCss/" class="nav-link">
  DOM+CSS
</a></div><div class="nav-item"><a href="/blog/other/" class="nav-link router-link-active">
  Others
</a></div><div class="nav-item"><a href="/blog/daily/" class="nav-link">
  随笔
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/other/" aria-current="page" class="sidebar-link">服务器环境初始化</a></li><li><a href="/blog/other/webpack5_react_dev.html" class="sidebar-link">webpack5搭建React开发脚手架</a></li><li><a href="/blog/other/axios.html" class="sidebar-link">Axios-HTTP库</a></li><li><a href="/blog/other/cross-origin.html" class="sidebar-link">跨域解决方案</a></li><li><a href="/blog/other/regexp.html" class="sidebar-link">JavaScript正则表达式</a></li><li><a href="/blog/other/git.html" class="sidebar-link">Git基本使用</a></li><li><a href="/blog/other/markdown_grm.html" class="sidebar-link">Markdown概览</a></li><li><a href="/blog/other/vuepress_use.html" class="sidebar-link">vuepress使用记录</a></li><li><a href="/blog/other/JavaScript.inof.html" aria-current="page" class="active sidebar-link">JavaScript.Info阅读笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#空值合并运算符" class="sidebar-link">空值合并运算符 ??</a></li><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#switch语句" class="sidebar-link">switch语句</a></li><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#typeof-运算结果" class="sidebar-link">typeof 运算结果</a></li><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#defer和async" class="sidebar-link">defer和async</a></li><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#domcontentloaded、load、beforeunload、unload" class="sidebar-link">DOMContentLoaded、load、beforeunload、unload</a></li><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#mutationobserver" class="sidebar-link">MutationObserver</a></li><li class="sidebar-sub-header"><a href="/blog/other/JavaScript.inof.html#使正则表达式支持unicode编码" class="sidebar-link">使正则表达式支持Unicode编码</a></li></ul></li><li><a href="/blog/other/reSystem.html" class="sidebar-link">重装系统的步骤</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-info阅读笔记"><a href="#javascript-info阅读笔记" class="header-anchor">#</a> <code>JavaScript.Info</code>阅读笔记</h1> <p><a href="https://zh.javascript.info/" target="_blank" rel="noopener noreferrer">链接地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="空值合并运算符"><a href="#空值合并运算符" class="header-anchor">#</a> 空值合并运算符 <code>??</code></h2> <p>获取第一个“<strong>已定义</strong>”的变量的值(即值不是 <code>null</code> 或 <code>undefined</code> 的变量)。和<code>||</code>作用类似。如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 假设a = null,b=0,c=1</span>
<span class="token keyword">var</span> value1 <span class="token operator">=</span> a <span class="token operator">||</span> b <span class="token operator">||</span> c<span class="token punctuation">;</span> <span class="token comment">//value1=1   获取第一个“真值”   </span>
<span class="token keyword">var</span> value2 <span class="token operator">=</span> a <span class="token operator">??</span> b <span class="token operator">??</span> c<span class="token punctuation">;</span> <span class="token comment">//value2=0   获取第一个”不为 null/undefined“的值</span>
</code></pre></div><h2 id="switch语句"><a href="#switch语句" class="header-anchor">#</a> <code>switch</code>语句</h2> <p><code>switch</code>判断是否严格相等。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">switch</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token comment">// x=== &quot;value&quot;</span>
        <span class="token operator">...</span>
    	<span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token operator">...</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>任何表达式都可以成为 <code>switch/case</code> 的参数</strong></p> <p><code>switch</code> 和 <code>case</code> 都允许任意表达式。</p> <p>比如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token operator">+</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> b <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;this runs, because +a is 1, exactly equals b+1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;this doesn't run&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里 <code>+a</code> 返回 <code>1</code>，这个值跟 <code>case</code> 中 <code>b + 1</code> 相比较，然后执行对应的代码。</p> <h2 id="typeof-运算结果"><a href="#typeof-运算结果" class="header-anchor">#</a> <code>typeof</code> 运算结果</h2> <p>8中数据类型：</p> <ul><li>number</li> <li>string</li> <li>boolean</li> <li>null</li> <li>undefined</li> <li>bigint  --- 任意长度的整数</li> <li>symbol</li> <li>object</li></ul> <p>typeof返回的值包括以下8个：</p> <ul><li>number</li> <li>string</li> <li>boolean</li> <li>function</li> <li>undefined</li> <li>bigint  --- 任意长度的整数</li> <li>symbol</li> <li>object</li></ul> <p><code>typeof</code>运算符返回值的类型，注意以下<strong>两个特殊</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">;</span> <span class="token comment">//JavaScript 编程语言的设计错误</span>
<span class="token keyword">typeof</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token comment">// 函数被特殊对待</span>
</code></pre></div><h2 id="defer和async"><a href="#defer和async" class="header-anchor">#</a> defer和async</h2> <p>defer并行加载js文件，下载完不会立即执行，等页面解析完成后，按照页面上script标签的顺序执行 <br><br>
async并行加载js文件，下载完成立即执行，不会按照页面上script标签的顺序执行</p> <p><img src="/assets/img/deferAsync.ff9ba469.png" alt="preview"></p> <h2 id="domcontentloaded、load、beforeunload、unload"><a href="#domcontentloaded、load、beforeunload、unload" class="header-anchor">#</a> <code>DOMContentLoaded</code>、<code>load</code>、<code>beforeunload</code>、<code>unload</code></h2> <p><a href="https://zh.javascript.info/onload-ondomcontentloaded" target="_blank" rel="noopener noreferrer">页面生命周期<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong><code>DOMContentLoaded</code>:</strong></p> <blockquote><p>浏览器已完全加载HTML，并构建了DOM树，<code>script</code>标签也加载并执行结束之后才会触发<strong>该事件</strong>。
但像<code>img</code>和样式表之类的外部资源可能尚未加载完成。</p></blockquote> <p>假如脚本在等待样式表加载，那么<code>DOMContentLoaded</code>也会等待脚本加载并执行结束。</p> <p><code>DOMContentLoaded</code>事件发生在<code>document</code>对象上，我们<strong>必须使用</strong><code>addEventListener</code>来捕获它。</p> <p><strong><code>window.onload</code>:</strong></p> <blockquote><p>当整个页面(包括样式、图片和其他资源)加载完成时，会在<code>window</code>对象上触发<code>load</code>事件。</p></blockquote> <p><strong><code>window.onunload</code>:</strong></p> <blockquote><p>当访问者离开页面时，<code>window</code> 对象上的 <code>unload</code> 事件就会被触发。可以在<code>unload</code>事件处理程序中执行一些<strong>不涉及延迟</strong>的操作。</p> <p>以下是一个常见情况：</p> <p>当用户要离开的时候，我们希望通过 <code>unload</code> 事件保存一些数据到我们的服务器上。</p> <p>有一个特殊的 <code>navigator.sendBeacon(url, data)</code> 方法可以满足这种需求，详见规范 https://w3c.github.io/beacon/。</p> <p>它在后台发送数据，转换到另外一个页面<strong>不会有延迟</strong>：浏览器离开页面，但仍然在执行 <code>sendBeacon</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> analyticsData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* 带有收集的数据的对象 */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;unload&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span><span class="token string">&quot;/analytics&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>analyticsData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div></blockquote> <p><strong><code>window.onbeforeunload</code>:</strong></p> <blockquote><p>在用户离开页面时，<code>beforeunload</code>处理程序要求进行更多确认。感觉有时候不会生效(不明白为啥！)。</p></blockquote> <h2 id="mutationobserver"><a href="#mutationobserver" class="header-anchor">#</a> <code>MutationObserver</code></h2> <p><a href="https://zh.javascript.info/mutation-observer" target="_blank" rel="noopener noreferrer">DOM变动观察器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><code>MutationObserver</code> 是一个内建对象，它观察 DOM 元素，在其发生更改时触发回调。</p> <h2 id="使正则表达式支持unicode编码"><a href="#使正则表达式支持unicode编码" class="header-anchor">#</a> 使正则表达式支持<code>Unicode</code>编码</h2> <p><strong>核心关注：<code>u</code>修饰符 和 <code>\p{...}</code>查找。</strong></p> <p><a href="https://zh.javascript.info/regexp-unicode" target="_blank" rel="noopener noreferrer">详情参阅<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>实例：匹配一个16进制数字</strong></p> <p><code>\p{Hex_Digit}</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex">/x\p{Hex_Digit}\p{Hex_Digit}/u</span><span class="token punctuation">;</span>
<span class="token string">&quot;number: xAF&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token comment">// xAF</span>
</code></pre></div><p><strong>实例：匹配一个中文字符</strong></p> <p><code>\p{sc=Han}</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex">/\p{sc=Han}/gu</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello Привет 你好 123_456</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;你&quot;,&quot;好&quot;]</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">作者：王龙楷； 标签：原创； 提交时间:</span> <span class="time">11/14/2020, 10:12:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/other/vuepress_use.html" class="prev">
        vuepress使用记录
      </a></span> <span class="next"><a href="/blog/other/reSystem.html">
        重装系统的步骤
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.b0a4ce1e.js" defer></script><script src="/assets/js/2.0d9e74f2.js" defer></script><script src="/assets/js/16.aae0e7a7.js" defer></script><script src="/assets/js/9.6b44206c.js" defer></script>
  </body>
</html>
